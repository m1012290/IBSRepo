<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui"
	xmlns:f="http://java.sun.com/jsf/core">
<h:body>

	

	<ui:composition template="/template/common/commonLayout.xhtml">
		<ui:define name="content">
			<h:form>	
				<p:messages id="messages" autoUpdate="true"
					closable="true" />
				<p:panel id="referalpanel" style="padding:0px; border: none">
				 
				<p:panel id="panelCustomer" header="Customer Details"
					style="margin-bottom:10px;">

					<h:panelGrid columns="6" style="width:100%;">

						
						<p:outputLabel value="Customer" for="customerid" title="Existing customers whose name starts with entered value will be listed"/>
				        <p:autoComplete title="Existing customers whose name starts with entered value will be listed"   placeholder="Enter Customer Name"  id="customerid" value="#{editCustEnqDetailsMB.customerVO}" completeMethod="#{editCustEnqDetailsMB.completeCustomersListMethod}"
				                        var="customer" itemLabel="#{customer.name}" itemValue="#{customer}"  converter="customerConverter" required="true" requiredMessage="Please select existing customer or add new one" validatorMessage="Name should be minimum of 4 character and maximum of 50 characters"
				                        forceSelection="true">
				            <p:column>
				                <h:outputText value="#{customer.name}" />
				            </p:column>
				            <p:ajax event="itemSelect" update="panelCustomer"  listener="#{editCustEnqDetailsMB.valueChangeEventForCustName}" process="customerid" partialSubmit="true"/>
				            <f:validateLength minimum="4" maximum="50"/>
				        </p:autoComplete>
							<p:outputLabel for="salutation" value="Salutation"  styleClass="lableCls" />
						<p:selectOneMenu id="salutation" style="width:158px;"
							value="#{editCustEnqDetailsMB.enquiryVO.customerDetails.salutation}" required="true" label="Salutation" requiredMessage="Please select the Salutation">
							<f:selectItem itemLabel="---Select Salutation---" itemValue="" />
							<f:selectItems value="#{editCustEnqDetailsMB.salutations}" />
						</p:selectOneMenu>
						
						<p:outputLabel for="firstName" value="First Name" />
						<p:inputText id="firstName"
							value="#{editCustEnqDetailsMB.enquiryVO.customerDetails.contactAndAddrDets.firstName}"
							required="false" validatorMessage="First Name should not be more than 50 characters">
					    <f:validateLength  maximum="50"/> 
					    </p:inputText> 
					    
						



						<p:outputLabel for="middleName" value="Middle Name" />
						<p:inputText id="middleName"
							value="#{editCustEnqDetailsMB.enquiryVO.customerDetails.contactAndAddrDets.middleName}"
							required="false" validatorMessage="Middle Name should not be more than 50 characters">
					    <f:validateLength  maximum="50"/> 
					    </p:inputText> 



						<p:outputLabel for="lastName" value="Last Name" />
						<p:inputText id="lastName"
							value="#{editCustEnqDetailsMB.enquiryVO.customerDetails.contactAndAddrDets.lastName}"
							required="false" validatorMessage="Last Name should not be more than 50 characters">
					    <f:validateLength  maximum="50"/> 
					    </p:inputText> 
					    
					    



						<p:outputLabel for="custGroup" value="Group" />
						<p:inputText id="custGroup"
							value="#{editCustEnqDetailsMB.enquiryVO.customerDetails.group}"
							required="false" validatorMessage="Group should not be more than 50 characters">
					    <f:validateLength  maximum="50"/> 
					    </p:inputText> 



						<p:outputLabel for="custCat" value="Category" />
						<p:selectOneMenu id="custCat"
							value="#{editCustEnqDetailsMB.enquiryVO.customerDetails.category}">
							<f:selectItem itemLabel="----Select Category---" itemValue="" />
							<f:selectItems value="#{editCustEnqDetailsMB.custCategories}" />
						</p:selectOneMenu>


						<p:outputLabel for="custClass" value="Classification" />
						<p:selectOneMenu id="custClass" style="width:158px;"
							value="#{editCustEnqDetailsMB.enquiryVO.customerDetails.classification}">
							<f:selectItem itemLabel="-Select Classification-" itemValue="" />
							<f:selectItems
								value="#{editCustEnqDetailsMB.custClassifications}" />
						</p:selectOneMenu>

						<p:outputLabel for="sourceOfBusiness" value="Source of Business" />
						<p:inputText id="sourceOfBusiness"
							value="#{editCustEnqDetailsMB.enquiryVO.customerDetails.sourceOfBusiness}"
							required="false" validatorMessage="Source of Business field should not be more than 50 characters">
					    <f:validateLength  maximum="50"/> 
					    </p:inputText>



						<p:outputLabel for="salesExe" value="Sales Executive" />
						<p:inputText id="salesExe"
							value="#{editCustEnqDetailsMB.enquiryVO.customerDetails.salesExecutive}"
							required="false" validatorMessage="Sales Executive field should not be more than 50 characters">
					    <f:validateLength  maximum="50"/> 
					    </p:inputText>



						<p:outputLabel for="title" value="Title" />
						<p:selectOneMenu id="title" style="width:158px;"
							value="#{editCustEnqDetailsMB.enquiryVO.customerDetails.contactAndAddrDets.title}">
							<f:selectItem itemLabel="------Select Title-------" itemValue="" />
							<f:selectItems value="#{editCustEnqDetailsMB.titles}" />
						</p:selectOneMenu>


						<p:outputLabel for="primaryEmailID" value="EmailID" />
						<p:inputText id="primaryEmailID"
							value="#{editCustEnqDetailsMB.enquiryVO.customerDetails.contactAndAddrDets.emailId}"
							required="true"  label="EmailID" requiredMessage="Please enter the EmailID" validatorMessage="Invalid email format, Please enter the correct EmailID">
						<f:validateRegex 
						pattern="^[_A-Za-z0-9-\+]+(\.[_A-Za-z0-9-]+)*@[A-Za-z0-9-]+(\.[A-Za-z0-9]+)*(\.[A-Za-z]{2,})$" />
					   </p:inputText>


						<p:outputLabel for="primMobNum" value="MobileNumber +968" />
						<p:inputText id="primMobNum"
							value="#{editCustEnqDetailsMB.enquiryVO.customerDetails.contactAndAddrDets.mobileNo}"
							required="true" label="Mobile Number"  requiredMessage="Please enter the MobileNumber" converterMessage="Alphabets are not allowed , Please Enter the Correct Mobile Number" validatorMessage="MobileNumber should be of 8 digits">
						<f:convertNumber  integerOnly="true" type="number" for="primMobNum" pattern="###"/>
						
						<f:validateLength minimum="8" maximum="8"  for="primMobNum"/>  
						</p:inputText>


						<p:outputLabel for="primLandNum" value="LandLine Number" />
						<p:inputText id="primLandNum"
							value="#{editCustEnqDetailsMB.enquiryVO.customerDetails.contactAndAddrDets.landlineNo}"
							required="false" converterMessage="Alphabets are not allowed , Please enter the correct LandLine Number" validatorMessage="LandLine Number should be of 8 digits">
						<f:convertNumber integerOnly="true" type="number" for="primLandNum"  pattern="###"/>
						<f:validateLength minimum="8" maximum="8"  for="primLandNum"/>  
						</p:inputText>
						


						<p:outputLabel for="faxNum" value="Fax Number" />
						<p:inputText id="faxNum"
							value="#{editCustEnqDetailsMB.enquiryVO.customerDetails.contactAndAddrDets.faxNo}"
							required="false" converterMessage="Alphabets are not allowed ,Please enter the correct Fax Number" validatorMessage="fax number should not be more than 25 digits">
						<f:convertNumber integerOnly="true" type="number" for="faxNum"  pattern="###"/>
						<f:validateLength maximum="25"  for="faxNum"/>  	
						</p:inputText> 


						<p:outputLabel for="city" value="City" />
						<p:inputText id="city"
							value="#{editCustEnqDetailsMB.enquiryVO.customerDetails.contactAndAddrDets.addressVO.city}" validatorMessage="Numbers\Special characters are not allowed in the city field"
							required="false" >
						<f:validateRegex pattern="[a-zA-Z]*"></f:validateRegex> 
						<f:validateLength maximum="50"  for="City"/>  	
           			 	</p:inputText>  

						<p:outputLabel for="country" value="Country" />
						<p:inputText id="country"
							value="#{editCustEnqDetailsMB.enquiryVO.customerDetails.contactAndAddrDets.addressVO.country}" validatorMessage="Numbers\Special characters are not allowed in the Country field"
							required="false" >
						<f:validateRegex pattern="[a-zA-Z]*"></f:validateRegex> 
						<f:validateLength maximum="50"  for="City"/>  	
					    </p:inputText>

						<p:outputLabel for="address" value="Address" />
						<p:inputText id="address"
							value="#{editCustEnqDetailsMB.enquiryVO.customerDetails.contactAndAddrDets.addressVO.address}"
							required="false" validatorMessage="Address should not be more than 100 characters">
						<f:validateLength maximum="100"  for="address"/> 
						</p:inputText> 	
						



						<p:outputLabel for="poBox" value="PO Box" />
						<p:inputText id="poBox"
							value="#{editCustEnqDetailsMB.enquiryVO.customerDetails.contactAndAddrDets.addressVO.poBox}"
							required="true"  label="PO Box" requiredMessage="Please enter the PO Box Number" converterMessage="Alphabets are not allowed, Please enter the correct PO Box Number" validatorMessage="POBox number should not be more than 10 digits">
					   <f:convertNumber integerOnly="true" type="number" for="poBox"  pattern="###"/>
					   <f:validateLength maximum="10"  for="poBox"/> 
					   </p:inputText>
							


						<p:outputLabel for="locLatitude" value="Location Latitude" />
						<p:inputText id="locLatitude"
							value="#{editCustEnqDetailsMB.enquiryVO.customerDetails.contactAndAddrDets.addressVO.lattitude}"
							required="false" converterMessage="Location Latitude should be a Number" validatorMessage="Location Latitude should not be more than 5 digits">
						<f:convertNumber integerOnly="true" type="number" for="locLatitude"  pattern="###"/>
						<f:validateLength maximum="5"  for="locLatitude"/> 
						</p:inputText>


						<p:outputLabel for="locLongitude" value="Location Longitude" />
						<p:inputText id="locLongitude"
							value="#{editCustEnqDetailsMB.enquiryVO.customerDetails.contactAndAddrDets.addressVO.longitude}"
							required="false" converterMessage="Location Longitude should be a Number" validatorMessage="Location Longitude should not be more than 5 digits">
						<f:convertNumber integerOnly="true" type="number" for="locLongitude"  pattern="###"/>
						<f:validateLength maximum="5"  for="locLatitude"/> 
						</p:inputText>


						<p:outputLabel for="altEmailID1" value="Alternate EmailID1" />
						<p:inputText id="altEmailID1"
							value="#{editCustEnqDetailsMB.enquiryVO.customerDetails.contactAndAddrDets.alternateEmailId1}"
							required="false" >

						<f:validator validatorId="custom.stringValidator" /> 
					   </p:inputText>
					   
					   
						<p:outputLabel for="altMobNum1" value="Alternate MobileNumber1 +968" />
						<p:inputText id="altMobNum1"
							value="#{editCustEnqDetailsMB.enquiryVO.customerDetails.contactAndAddrDets.alternateMobileNo1}"
							required="false" label="Alternate MobileNumber1" converterMessage="Alphabets are not allowed , Please Enter the Correct Alternate MobileNumber1" validatorMessage="Alternate MobileNumber1 should be of 8 digits">
						<f:convertNumber integerOnly="true" type="number" for="altMobNum1"  pattern="###"/>
						<f:validateLength minimum="8" maximum="8"  for="altMobNum1"/>  
						</p:inputText>


						<p:outputLabel for="altLandNum1" value="Alternate LandLineNumber1" />
						<p:inputText id="altLandNum1"
							value="#{editCustEnqDetailsMB.enquiryVO.customerDetails.contactAndAddrDets.alternateLandlineNo1}"
							required="false" converterMessage="Alphabets are not allowed , Please enter the correct Alternate LandLineNumber1" validatorMessage="Alternate LandLineNumber1 should be of 8 digits">
						<f:convertNumber integerOnly="true" type="number" for="altLandNum1" pattern="###"/>
						<f:validateLength minimum="8" maximum="8"  for="altLandNum1"/>  
						</p:inputText>


						<p:outputLabel for="altEmailID2" value="Alternate EmailID2" />
						<p:inputText id="altEmailID2"
							value="#{editCustEnqDetailsMB.enquiryVO.customerDetails.contactAndAddrDets.alternateEmailId2}"
							required="false" >
						<f:validator validatorId="custom.stringValidator" /> 
					   </p:inputText>
					   

						<p:outputLabel for="altMobNum2" value="Alternate MobileNumber2 +968" />
						<p:inputText id="altMobNum2"
							value="#{editCustEnqDetailsMB.enquiryVO.customerDetails.contactAndAddrDets.alternateMobileNo2}"
							required="false" label="Alternate MobileNumber2" converterMessage="Alphabets are not allowed , Please Enter the Correct Alternate MobileNumber2" validatorMessage="Alternate MobileNumber2 should be of 8 digits">
						<f:convertNumber integerOnly="true" type="number" for="altMobNum2" pattern="###"/>
						<f:validateLength minimum="8" maximum="8"  for="altMobNum2"/>  
						</p:inputText>


						<p:outputLabel for="altLandNum2" value="Alternate LandLineNumber2" />
						<p:inputText id="altLandNum2"
							value="#{editCustEnqDetailsMB.enquiryVO.customerDetails.contactAndAddrDets.alternateLandLineNo2}"
							required="false" converterMessage="Alphabets are not allowed , Please enter the correct Alternate LandLineNumber2" validatorMessage="Alternate LandLineNumber2 should be of 8 digits">
						<f:convertNumber integerOnly="true" type="number" for="altLandNum2" pattern="###"/>
						<f:validateLength minimum="8" maximum="8"  for="altLandNum2"/> 
						</p:inputText> 


						<p:outputLabel for="custId" value="CustomerId" />
						<p:inputText id="custId"
							value="#{editCustEnqDetailsMB.enquiryVO.customerDetails.customerId}"
							readonly="true" required="false" />



					</h:panelGrid>
				</p:panel>
				<p:panel id="panelEnquiry" header="Enquiry Details"
					style="margin-bottom:10px; position:relative; height:260px;">

					<h:panelGrid columns="4" style="width:100%;">

						<p:outputLabel for="enqNum" value="Enquiry Number" />
						<p:inputText id="enqNum" readonly="true"
							value="#{editCustEnqDetailsMB.enquiryVO.enquiryNo}"
							required="false" />

						<p:outputLabel for="enqType" value="Enquiry Type" />
						<p:selectOneMenu id="enqType" style="width:160px;"
							value="#{editCustEnqDetailsMB.enquiryVO.type}" required="true" requiredMessage="Please select the EnquiryType" disabled="#{editCustEnqDetailsMB.existingEnquiryFlow}">
							<f:selectItem itemLabel="Select Enquiry Type" itemValue="" />
							<f:selectItems value="#{editCustEnqDetailsMB.enquiryTypes}" />
						</p:selectOneMenu>

						<p:outputLabel for="quotNum" value="Quote Slip Number" />
						<p:inputText id="quotNum"
							value="#{editCustEnqDetailsMB.quoteSlipId}"
							readonly="true" required="false" />

						<p:outputLabel for="polNum" value="Policy Number" />
						<p:inputText id="polNum" value="#{editCustEnqDetailsMB.policyVO.policyNo}" required="false" />

						<p:outputLabel for="Description" value="Description" />
						<p:inputTextarea rows="6" cols="50" id="Description" validatorMessage="Enquiry Description entered is short, Please Enter the Full Description within 500 characters "

							value="#{editCustEnqDetailsMB.enquiryVO.description}" required="true" requiredMessage="Please enter the Enquiry Description">

						 <f:validateLength minimum="10"  maximum="500"     for="Description:"/>  
						</p:inputTextarea>


					</h:panelGrid>
				</p:panel>

				<p:panel id="panelAudit" header="Audit Details"
					style="margin-bottom:10px;">

					<h:panelGrid columns="6" style="width:100%;">

						<p:outputLabel for="recCreatedUsrID" value="Record Created UserID" />
						<p:inputText id="recCreatedUsrID"
							value="#{editCustEnqDetailsMB.recCreatedUserID}" readonly="true"
							required="false" />

						<p:outputLabel for="recCreatedDate" value="Record Created Date" />
						<p:inputText id="recCreatedDate"
							value="#{editCustEnqDetailsMB.recCreatedDate}" readonly="true"
							required="false" />

						<p:outputLabel for="recUpdUsrID" value="Record Updated UserID" />
						<p:inputText id="recUpdUsrID"
							value="#{editCustEnqDetailsMB.recUpdatedUserID}" readonly="true"
							required="false" />

						<p:outputLabel for="recUpdDate" value="Record Updated Date" />
						<p:inputText id="recUpdDate"
							value="#{editCustEnqDetailsMB.recUpdatedDate}" readonly="true"
							required="false" />


					</h:panelGrid>
				</p:panel>			
				
				</p:panel>
				
				<p:commandButton id="savebtn" value="Save" action="#{editCustEnqDetailsMB.save}"
					update="messages, panelCustomer, panelEnquiry"  validateClient="true" icon="ui-icon-disk"
					style="float:right:20px;" />&nbsp;&nbsp;&nbsp;&nbsp;						
				
				<p:commandButton id="nextbtn" value="Next" ajax="false" action="#{editCustEnqDetailsMB.next}" style="float:right:20px;" />
							
				<p:blockUI block="referalpanel" widgetVar="bui" blocked="#{editCustEnqDetailsMB.screenFreeze}"/>
				<p:blockUI block="referalpanel" trigger="savebtn">
					LOADING<br />  
      				<p:graphicImage value="../images/ajax-loader.gif"/>
  				</p:blockUI>
  				<p:blockUI block="referalpanel" trigger="nextbtn">
					LOADING<br />  
      				<p:graphicImage value="../images/ajax-loader.gif"/>
  				</p:blockUI>
			</h:form>
		</ui:define>
	</ui:composition>

</h:body>

</html>
