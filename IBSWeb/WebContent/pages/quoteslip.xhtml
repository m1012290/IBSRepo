<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"   
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://java.sun.com/jsf/core"
       xmlns:custom="http://www.shrinfo.com/custom"
      >
    <h:body>
    	<ui:composition template="/template/common/commonLayout.xhtml">
    	<ui:define name="content">
    			<h:form>
    			

    				<p:messages id="messages" autoUpdate="true" closable="true" /> 
    				
    				<p:panel id="referalpanel" style="padding:0px; border: none">
    					<p:panel id="panelInsured" header="Insured Details" style="margin-bottom:10px;"> 
				       			 <h:panelGrid columns="6">  
				       			 
				       			 	<h:outputLabel for="salutation" value="Salutation" />  
            						<p:selectOneMenu id="salutation" value="#{quoteSlipMB.insuredDetails.salutation}"  required="true"  label="Salutation" requiredMessage="Please select the Salutation">  
                						<f:selectItem itemLabel="---Select Salutation---" itemValue="" />  
                						<f:selectItems value="#{editCustEnqDetailsMB.salutations}" />  
            						</p:selectOneMenu>  
				   
						       		<h:outputLabel for="name" value="Name *" />  
						            <p:inputText id="name" value="#{quoteSlipMB.insuredDetails.name}" 
						            required="true" label="Name" requiredMessage="Please enter the Name" validatorMessage="Name should be minimum of 4 character and maximum of 50 characters">
									<f:validateLength minimum="4" maximum="50"/>  
									</p:inputText>  
						            			              
						            <h:outputLabel for="primaryEmailID" value="EmailID *" />  
						            <p:inputText id="primaryEmailID" value="#{quoteSlipMB.insuredDetails.contactAndAddrDetails.emailId}" 
										required="true"  label="EmailID" requiredMessage="Please enter the EmailID" validatorMessage="Invalid email format, Please enter the correct EmailID">
									<f:validateRegex 
									pattern="^[_A-Za-z0-9-\+]+(\.[_A-Za-z0-9-]+)*@[A-Za-z0-9-]+(\.[A-Za-z0-9]+)*(\.[A-Za-z]{2,})$" />
					   				</p:inputText>
					   				
						            
						            <h:outputLabel for="primMobNum" value="Mobile Number *" />  
						            <p:inputText id="primMobNum" value="#{quoteSlipMB.insuredDetails.contactAndAddrDetails.mobileNo}" 
						            	required="true" label="Mobile Number"  requiredMessage="Please enter the MobileNumber" converterMessage="Alphabets are not allowed , Please Enter the Correct Mobile Number" validatorMessage="MobileNumber should be of 8 digits">
										<f:convertNumber integerOnly="true" type="number" for="primMobNum"/>
										<f:validateLength minimum="8" maximum="8"  for="primMobNum"/>  
									</p:inputText>
						            
						            <h:outputLabel for="primLandNum" value="LandLine Number" /> 
						       		<p:inputText id="primLandNum" value="#{quoteSlipMB.insuredDetails.contactAndAddrDetails.landlineNo}" 
						       		required="false" converterMessage="Alphabets are not allowed , Please enter the correct LandLine Number" validatorMessage="LandLine Number should be of 8 digits">
									<f:convertNumber integerOnly="true" type="number" for="primLandNum"/>
									<f:validateLength minimum="8" maximum="8"  for="primLandNum"/>  
									</p:inputText> 
            					
						            <h:outputLabel for="faxNum" value="Fax Number" />  
						            <p:inputText id="faxNum" value="#{quoteSlipMB.insuredDetails.contactAndAddrDetails.faxNo}" 
						            required="false" converterMessage="Alphabets are not allowed ,Please enter the correct Fax Number" validatorMessage="Fax Number should not be more than 50 characters">
									<f:convertNumber integerOnly="true" type="number" for="faxNum"/>
									<f:validateLength maximum="25"  for="faxNum"/>  	
									</p:inputText>
						            
						            <h:outputLabel for="city" value="City"/>  
						            <p:inputText id="city" value="#{quoteSlipMB.insuredDetails.contactAndAddrDetails.addressVO.city}" validatorMessage="Numbers\Special characters are not allowed in the city field"
									required="false" >
									<f:validateRegex pattern="[a-zA-Z]*"></f:validateRegex> 
									<f:validateLength maximum="50"  for="city"/>  	
           			 				</p:inputText> 
           			 				 

						            <p:outputLabel for="country" value="Country" />  
						            <p:inputText id="country"  value="#{quoteSlipMB.insuredDetails.contactAndAddrDetails.addressVO.country}" validatorMessage="Numbers\Special characters are not allowed in the country field"
									required="false" >
									<f:validateRegex pattern="[a-zA-Z]*"></f:validateRegex> 
									<f:validateLength maximum="50"  for="country"/>  	
           			 				</p:inputText> 
           			 				 

						            <h:outputLabel for="address" value="Address" />  
						            <p:inputText id="address" value="#{quoteSlipMB.insuredDetails.contactAndAddrDetails.addressVO.address}"  
						            required="false" validatorMessage="Address should not be more than 100 characters">
									<f:validateLength maximum="100"  for="address"/> 
									</p:inputText>   
						  
						            <h:outputLabel for="poBox" value="PO Box *" />  
						            <p:inputText id="poBox" value="#{quoteSlipMB.insuredDetails.contactAndAddrDetails.addressVO.poBox}" 
						            required="true"  label="PO Box" requiredMessage="Please enter the PO Box Number" converterMessage="Alphabets are not allowed, Please enter the correct PO Box Number">
					   				<f:convertNumber integerOnly="true" type="number" for="poBox"/>
					   				<f:validateLength maximum="10"  for="poBox"/> 
					   				</p:inputText> 
						            
						            <h:outputLabel for="insuredID" value="Insured ID" />  
						            <p:inputText id="insuredID" value="#{quoteSlipMB.insuredDetails.id}" readonly="true" required="false" />  
						       
			       				</h:panelGrid>
					   </p:panel>
					   <p:panel id="panelProductDetails" header="Product Details" style="margin-bottom:10px;">
								<h:panelGrid columns="6">
								
								 	<h:outputLabel for="quoteSlipID" value="Quote Slip Number" />  
						            <p:inputText id="quoteSlipID"  value="#{quoteSlipMB.quoteDetailVO.quoteSlipId}" readonly="true" required="false" /> 
						            
						            <h:outputLabel for="quoteSlipVersion" value="Quote Slip Version" />  
						            <p:inputText id="quoteSlipVersion" value="#{quoteSlipMB.quoteDetailVO.quoteSlipVersion}" readonly="true" required="false" />  
						            
						            <h:outputLabel for="quoteSlipDate" value="Quote Slip Date" />  
						            <p:calendar readonlyInput="true" pattern="dd/MM/yyyy" value="#{quoteSlipMB.quoteDetailVO.quoteSlipDate}" id="popupCal" />  
						            	

									<h:outputLabel value="Remarks: *" />
								    <p:inputTextarea rows="6" cols="50" value="#{quoteSlipMB.quoteDetailVO.remarks}"
								    required="true" requiredMessage="Please enter the Remarks" validatorMessage="Entered Remarks is short, Please enter the remarks in detail within 200 characters">

								    <f:validateLength minimum="10" maximum="200"  for="Description:"/>  
									</p:inputTextarea>
																		
						            <h:outputLabel for="products" value="Products" />  
            						<p:selectOneMenu id="products" value="#{quoteSlipMB.quoteDetailVO.productDetails.productClass}" required="true" label="Product" requiredMessage="Please select the Product">
            							<p:ajax listener="#{quoteSlipMB.retrieveProductUWFields}" update="panelProductDetails, panelUWDetails" />  
                						<f:selectItem itemLabel="---Select Product---" itemValue="" />
                						<f:selectItems value="#{quoteSlipMB.products}" />  
            						</p:selectOneMenu>
            						
            						<h:outputLabel for="insurancecompanies" value="Companies" />  
            						<p:selectManyMenu id="insurancecompanies" value="#{quoteSlipMB.selectedInsCompanies}" >
            							<f:selectItem itemLabel="---Select Companies---" itemValue="" />
            							<f:selectItems value="#{quoteSlipMB.insCompanies}"/>
            						</p:selectManyMenu>
						          </h:panelGrid>
						 </p:panel>
						 <p:panel id="panelUWDetails" header="Underwriting Details" style="margin-bottom:10px;">
						    <h:panelGrid id="uwdetailsgrid" rendered="#{quoteSlipMB.renderCustomUWComponent}">
						 		<custom:uwdetails value="#{quoteSlipMB.quoteDetailVO.productDetails}" tablecols="2"/>
						 	</h:panelGrid>
						 </p:panel>
						            
						      <p:panel id="panelAudit" header="Audit Details" style="margin-bottom:10px;">
							     <h:panelGrid columns="6" >
						            
						            <h:outputLabel for="recCreatedUsrID" value="Record Created UserID" />  
						            <p:inputText id="recCreatedUsrID"  value="#{editCustEnqDetailsMB.recCreatedUserID}"  readonly="true" required="false" /> 
						            
						            <h:outputLabel for="recCreatedDate" value="Record Created Date" />  
						            <p:inputText id="recCreatedDate"  value="#{editCustEnqDetailsMB.recCreatedDate}"  readonly="true" required="false" /> 
						            
						            <h:outputLabel for="recUpdUsrID" value="Record Updated UserID" />  
						            <p:inputText id="recUpdUsrID"  value="#{editCustEnqDetailsMB.recUpdatedUserID}"  readonly="true" required="false" /> 
						            
						            <h:outputLabel for="recUpdDate" value="Record Updated Date" />  
						            <p:inputText id="recUpdDate"  value="#{editCustEnqDetailsMB.recUpdatedDate}"  readonly="true" required="false" /> 
						            
						           	
								</h:panelGrid>
								</p:panel>
			 <p:dialog header="Referral Section" widgetVar="referraldialog">
					<p:panel id="referralsection">	
						<h:panelGrid columns="4">
							<h:outputLabel for="name" value="Referred By" />  
						    <p:inputText id="referredby" value="#{quoteSlipMB.referralDesc}" readonly="true" required="false" />	 	
							
							<h:outputLabel value="Refer To" />
							<p:selectOneMenu id="referredto">
								<f:selectItem itemLabel="---Select User---" itemValue="" />	
								<f:selectItems value="#{quoteSlipMB.usersList}" />					
							</p:selectOneMenu>
							
							<h:outputLabel value="Referral Description"/>
							<p:inputTextarea  id="referraldesc" value="#{quoteSlipMB.referralDesc}"/>
						</h:panelGrid>	  				
	  				</p:panel>
	  			</p:dialog>
						
				</p:panel>
			<p:commandButton value="Save" action="#{quoteSlipMB.save}"  update="messages, panelProductDetails, panelInsured, referralsection" oncomplete="handleSaveResponse(xhr, status, args)" icon="ui-icon-disk"  style="float:right:20px;" />&nbsp;&nbsp;&nbsp;&nbsp;
			<p:commandButton value="Next" action="#{quoteSlipMB.next}"  update="messages,referralsection" oncomplete="handleSaveResponse(xhr, status, args)" style="float:right:20px;" />
			<p:commandButton value="Generate QuoteSlipDoc" action="#{quoteSlipMB.generatePDFForQuoteSlip()}"  style="float:right:20px;" />
			
			
			<p:blockUI block="referalpanel" widgetVar="bui" blocked="#{quoteSlipMB.screenFreeze}"> Referral message </p:blockUI> 

					</h:form>
    		</ui:define>
    	</ui:composition>
    	
    </h:body>

</html>