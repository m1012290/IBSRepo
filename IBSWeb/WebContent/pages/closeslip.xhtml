<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"   
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://java.sun.com/jsf/core"
       xmlns:custom="http://www.shrinfo.com/custom"
      >
    <h:body>
    	
    	<ui:composition template="/template/common/commonLayout.xhtml">
    	<ui:define name="content">
    			<h:form id="form"> 
    			<p:growl id="messages1" showDetail="true"/>
    				
    				<p:messages id="messages" showDetail="true" autoUpdate="true" closable="true" /> 
    					<p:panel id="panelQuotation" header="Insured Details" style="margin-bottom:10px;"> 
				       			 <h:panelGrid columns="8">  
				       			 
				       			 
						       		<h:outputLabel for="name" value="Name: *" />  
						            <p:inputText id="name" value="#{quotationMB.insuredDetails.name}" readonly="true" 
						            required="true" label="Name" requiredMessage="Please enter the Name" validatorMessage="Name should be minimum of 4 character">
									<f:validateLength minimum="4"/>  
									</p:inputText>    
						            
						            <h:outputLabel for="products" value="Products:" />  
            						<p:selectOneMenu id="products"  value="#{quotationMB.quoteDetailVO.productDetails.productClass}">
                						<f:selectItem itemLabel="Select Product-" itemValue="" />  
                						<f:selectItems value="#{quotationMB.products}" />  
            						</p:selectOneMenu>
            						
            						
            						<h:outputLabel for="insurancecompanies" value="Companies:" />  
            						<p:selectManyMenu id="insurancecompanies" value="#{quoteSlipMB.selectedInsCompanies}" >
            							<f:selectItems value="#{quotationMB.insCompanies}"/>
            						</p:selectManyMenu>
            						
            						
            						<h:outputLabel for="quoteSlipID" value="Quote Slip Number:" />  
						            <p:inputText id="quoteSlipID"  value="#{quotationMB.quoteDetailVO.quoteSlipId}" readonly="true" required="false" /> 
						            
				                  	<h:outputLabel for="quoteSlipVersion" value="Quote Slip Version:" />  
						            <p:inputText id="quoteSlipVersion" value="#{quotationMB.quoteDetailVO.quoteSlipVersion}" readonly="true"  required="false" />  
						            			              
						            
						            <h:outputLabel for="insuredID" value="Insured ID:" />  
						            <p:inputText id="insuredID" value="#{quoteSlipMB.insuredDetails.id}" readonly="true" required="false" />  
						       
			       				</h:panelGrid>
					   </p:panel>
					  <!--  <p:panel id="panelUWDetails" header="Underwriting Details" style="margin-bottom:10px;">
						 	<custom:uwdetails value="#{quotationMB.quoteDetailVO.productDetails}"/>
					  </p:panel> -->
					  
		<p:panel header="Enter the quotation Details" style="margin-bottom:10px;"> 
                			<p:panelGrid columns="08">
                    <h:outputLabel for="compName" value="CompanyName: " />
					<p:selectOneMenu value="#{quotationMB.quoteDetailVO.companyCode}">
                            <f:selectItem itemLabel="---Select Company Name---" itemValue="" />
            				<f:selectItems value="#{quotationMB.insCompanies}"/>
                   `</p:selectOneMenu>                     
                   	<h:outputLabel for="quoteNum" value="Quotation Number: " />
                    <p:inputText value="#{quotationMB.quoteDetailVO.quoteNo}">
                    <f:convertNumber integerOnly="true" type="number" for="quoteNum"/>
						<f:validateLength minimum="1" maximum="8"  for="quoteNum"/>  
				   </p:inputText>
				   
				   
                    <h:outputLabel for="quotedPremium" value="Quoted Premium:" />
                    <p:inputText  value="#{quotationMB.quoteDetailVO.quoteSlipPrmDetails.premium}">
                    <f:convertNumber integerOnly="true" type="percentage" for="quotedPremium"/>
						<f:validateLength minimum="1" maximum="8"  for="quotedPremium"/>  
				   </p:inputText>
                    
                    
                    <h:outputLabel for="sumInsured" value="Sum Insured:" />
                    <p:inputText value="#{quotationMB.quoteDetailVO.sumInsured}">
                    <f:convertNumber integerOnly="true" type="number" for="sumInsured"/>
						<f:validateLength minimum="1" maximum="8"  for="sumInsured"/>  
				   </p:inputText>
                    
                    
                    <h:outputLabel for="policyTerm" value="Policy Term:" />
                    <p:inputText  value="#{quotationMB.quoteDetailVO.policyTerm}">
                    <f:convertNumber integerOnly="true" type="number" for="policyTerm"/>
						<f:validateLength minimum="1" maximum="2"  for="policyTerm"/>  
				   </p:inputText>
				   
                    
                    <h:outputLabel  for="coverDesc" value="Cover Description:" />
						<p:inputTextarea rows="6" cols="50" id="coverDesc" 
							value="#{quotationMB.quoteDetailVO.quoteSlipPrmDetails.coverDescription}">
					    </p:inputTextarea>
                    
                    
                     
                    <h:outputLabel  for="recSummary" value="Recommendation Summary:" />
						<p:inputTextarea rows="6" cols="50" id="recSummary" validatorMessage="Recommendation Summary entered is short, Please enter full recommendation Summary"
							value="#{quotationMB.quoteDetailVO.recommendationSummary}" required="true" requiredMessage="Please enter the Recommendation Summary">
						 <f:validateLength minimum="10"  for="recSummary"/>  
					  </p:inputTextarea>
                    
                    <custom:uwdetails value="#{quotationMB.quoteDetailVO.productDetails}"/>
                    
                    <f:facet name="footer">
                        <h:commandButton value="Add Item" action="#{quotationMB.addAction()}" update="quotationList"/>
                    </f:facet>
                </p:panelGrid>
                <p:spacer height="30px;"/>
		</p:panel>
        
        <p:dataGrid var="quote"
					value="#{quotationMB.quoteDetailVODataModel}" columns="3" rows="12"
					paginator="true"
					paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
					rowsPerPageTemplate="9,12,15">
					<p:panel header="#{quote.companyCode}" style="text-align:center;"
						closable="true">
						<p:ajax event="close" listener="#{quotationMB.handleClose}" />
						<p:panelGrid columns="2" style="width:100%">

							<h:outputLabel value="Recommended" />
							<h:selectBooleanCheckbox value="#{quote.isQuoteRecommended}" />

							<h:outputLabel value="Quote number" />
							<h:inputText value="#{quote.quoteNo}" />

							<h:outputLabel value="Quoted premium" />
							<h:inputText value="#{quote.quoteSlipPrmDetails.premium}" />

							<h:outputLabel value="Sum Insured" />
							<h:inputText value="#{quote.sumInsured}" />

							<h:outputLabel value="Policy Term" />
							<h:inputText value="#{quote.policyTerm}" />

							<h:outputLabel value="Cover Description" />
							<h:inputText
								value="#{quote.quoteSlipPrmDetails.coverDescription}" />

							<h:outputLabel value="Recommendation Summary" />
							<h:inputText value="#{quote.recommendationSummary}" />

							<h:outputLabel value="UW fields" />
							<p:commandLink update=":form:uwFieldDetail"
								oncomplete="PF('uwFieldDetailDialog').show()"
								title="View Detail">
								<h:outputText styleClass="ui-icon ui-icon-search"
									style="margin:0 auto;" />
								<f:setPropertyActionListener value="#{quote}"
									target="#{quotationMB.selectedQuoteDetailVO}" />
							</p:commandLink>

						</p:panelGrid>
					</p:panel>
				</p:dataGrid>
				
				<p:dialog header="UW Fields Detail" widgetVar="uwFieldDetailDialog"
					modal="true" appendToBody="true">
					<p:outputPanel id="uwFieldDetail" style="margin-bottom:10px;">

						<h:panelGrid columns="2" cellpadding="5">
							<custom:uwdetails
								value="#{quotationMB.selectedQuoteDetailVO.productDetails}" />

						</h:panelGrid>
					</p:outputPanel>
				</p:dialog>
					   
			<p:commandButton value="Save" action="#{quotationMB.save}"  update="messages,referralsection" oncomplete="handleSaveResponse(xhr, status, args)" icon="ui-icon-disk"  style="float:right:20px;" />&nbsp;&nbsp;&nbsp;&nbsp;
			<p:commandButton value="Next" action="#{quotationMB.next}"  style="float:right:20px;" />
			
			<p:dialog header="Referral Section" widgetVar="referraldialog">
					<p:panel id="referralsection">	
						<h:panelGrid columns="4">
							<h:outputLabel for="name" value="Referred By" />  
						    <p:inputText id="referredby" value="#{quotationMB.referralDesc}" readonly="true" required="false" />	 	
							
							<h:outputLabel value="Refer To" />
							<p:selectOneMenu id="referredto">
								<f:selectItem itemLabel="---Select User---" itemValue="" />	
								<f:selectItems value="#{quotationMB.usersList}" />					
							</p:selectOneMenu>
							
							<h:outputLabel value="Referral Description"/>
							<p:inputTextarea  id="referraldesc" value="#{quotationMB.referralDesc}"/>
						</h:panelGrid>	  				
	  				</p:panel>
	  			</p:dialog>
    				
					   	
	   		</h:form>
    		</ui:define>
    		</ui:composition>
    	
    	
    </h:body>

</html>